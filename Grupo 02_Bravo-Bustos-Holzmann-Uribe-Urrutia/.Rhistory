datos2022 <- datos2022 %>%
rename(sexo = m0_sexo,
edad = m0_edad,
satisfacción_vida = s01,
poco_interés_alegría = s11_01,
decaimiento_pes_des = s11_02,
falta_energía = s11_04,
mala_opinión_propia = s11_07)
# Crear nueva bbdd "datos" con variables recodificadas
datos <- datos2022 %>%
mutate(across(c(sexo, edad, satisfacción_vida, poco_interés_alegría, mala_opinión_propia, decaimiento_pes_des, falta_energía),
~ as.numeric(.))) %>%     # Eliminar atributos de etiquetas que causan problemas
mutate(
R_sexo = car::recode(sexo, recodes = c("'1' = '0';
'2' = '1'")),
# Edad en tramos
edad_tramo = cut(edad,
breaks = c(18, 29, 44, 59, 79, Inf),
labels = c("18-29", "30-44", "45-59", "60-79", "80+"),
right = TRUE,
include.lowest = TRUE),
edad_tramo_num = as.numeric(edad_tramo),  #convertir tramos a numérico (1 a 5)
# Invertir valores
R_satisfaccion_vida = car::recode(satisfacción_vida,
recodes = c("1 = '5';
2 = '4';
3 = '3';
4 = '2';
5 = '1';
-888 = NA;
-999 = NA")),
# NA
R_poco_interes_alegria = car::recode(poco_interés_alegría,
recodes = c("-888 = NA;
-999 = NA")),
R_mala_opinion_propia = car::recode(mala_opinión_propia,
recodes = c("-888 = NA;
-999 = NA")),
R_decaimiento_des_pes = car::recode(decaimiento_pes_des,
recodes = c("-888 = NA;
-999 = NA")),
R_falta_energía = car::recode(falta_energía,
recodes = c("-888 = NA;
-999 = NA"))
) %>%
select (R_sexo, edad_tramo_num, R_satisfaccion_vida,  R_poco_interes_alegria, R_mala_opinion_propia, R_decaimiento_des_pes, R_falta_energía) #seleccionar  variables recodificadas para nueva bbdd
# Ver nueva base
glimpse(datos)
view(datos)
# Para identificar NA ocultos
table(datos$R_sexo, useNA = "always")
table(datos$edad_tramo_num, useNA = "always")
table(datos$R_satisfaccion_vida, useNA = "always")
table(datos$R_poco_interes_alegria, useNA = "always")
table(datos$R_mala_opinion_propia, useNA = "always")
table(datos$R_decaimiento_des_pes, useNA = "always")
table(datos$R_falta_energía, useNA = "always")
# LISTA DE TODAS LAS VARIABLES DISPONIBLES
variables_disponibles <- c("R_satisfaccion_vida", "R_poco_interes_alegria",
"R_mala_opinion_propia", "R_decaimiento_des_pes",
"R_falta_energia")
# GENERAR TODAS LAS COMBINACIONES POSIBLES DE 3 VARIABLES que incluyan R_satisfaccion_vida
combinaciones_posibles <- combn(variables_disponibles, 3, simplify = FALSE) %>%
# Filtrar solo las que incluyan R_satisfaccion_vida
keep(~ "R_satisfaccion_vida" %in% .)
cat("=== ANÁLISIS EXHAUSTIVO DE COMBINACIONES ===\n")
cat("Total de combinaciones posibles con R_satisfaccion_vida:", length(combinaciones_posibles), "\n\n")
# ANALIZAR CADA COMBINACIÓN
resultados_completos <- data.frame()
for(i in 1:length(combinaciones_posibles)) {
combo <- combinaciones_posibles[[i]]
alpha_val <- psych::alpha(datos[combo])$total$raw_alpha
# Calcular estadísticas adicionales
cor_matrix <- cor(datos[combo], use = "complete.obs")
cor_promedio <- mean(cor_matrix[lower.tri(cor_matrix)])
cor_minima <- min(cor_matrix[lower.tri(cor_matrix)])
# Identificar variables en la combinación
variables_incluidas <- paste(combo, collapse = " + ")
variables_excluidas <- paste(setdiff(variables_disponibles, combo), collapse = ", ")
cat("COMBINACIÓN", i, ":\n")
cat("Variables:", variables_incluidas, "\n")
cat("Alpha:", round(alpha_val, 3), "\n")
cat("Correlación promedio:", round(cor_promedio, 3), "\n")
cat("Correlación mínima:", round(cor_minima, 3), "\n")
cat("---\n")
# Guardar resultados
resultados_completos <- rbind(resultados_completos, data.frame(
Combinacion = i,
Variables = variables_incluidas,
Variables_Excluidas = variables_excluidas,
Alpha = round(alpha_val, 3),
Correlacion_promedio = round(cor_promedio, 3),
Correlacion_minima = round(cor_minima, 3)
))
# ORDENAR POR ALPHA (MEJORES PRIMERO)
resultados_ordenados <- resultados_completos %>%
arrange(desc(Alpha))
cat("=== RANKING DE MEJORES COMBINACIONES ===\n")
print(resultados_ordenados)
# IDENTIFICAR LA MEJOR COMBINACIÓN
mejor_combinacion <- resultados_ordenados[1, ]
mejor_variables <- str_split(mejor_combinacion$Variables, " \\+ ")[[1]]
cat("\n=== MEJOR COMBINACIÓN ENCONTRADA ===\n")
cat("PUESTACIÓN: #1\n")
cat("VARIABLES:", mejor_combinacion$Variables, "\n")
cat("ALPHA:", mejor_combinacion$Alpha, "\n")
cat("CORRELACIÓN PROMEDIO:", mejor_combinacion$Correlacion_promedio, "\n")
cat("VARIABLES EXCLUIDAS:", mejor_combinacion$Variables_Excluidas, "\n")
View(resultados_completos)
View(resultados_completos)
cat("PUESTACIÓN: #1\n")
View(combinaciones_posibles)
View(resultados_completos)
# LISTA DE TODAS LAS VARIABLES DISPONIBLES
variables_disponibles <- c("R_satisfaccion_vida", "R_poco_interes_alegria",
"R_mala_opinion_propia", "R_decaimiento_des_pes",
"R_falta_energia")
# GENERAR TODAS LAS COMBINACIONES POSIBLES DE 3 VARIABLES que incluyan R_satisfaccion_vida
combinaciones_posibles <- combn(variables_disponibles, 3, simplify = FALSE) %>%
# Filtrar solo las que incluyan R_satisfaccion_vida
keep(~ "R_satisfaccion_vida" %in% .)
cat("=== ANÁLISIS EXHAUSTIVO DE COMBINACIONES ===\n")
cat("Total de combinaciones posibles con R_satisfaccion_vida:", length(combinaciones_posibles), "\n\n")
# ANALIZAR CADA COMBINACIÓN
resultados_completos <- data.frame()
for(i in 1:length(combinaciones_posibles))
combo <- combinaciones_posibles[[i]]
alpha_val <- psych::alpha(datos[combo])$total$raw_alpha
# Calcular estadísticas adicionales
cor_matrix <- cor(datos[combo], use = "complete.obs")
cor_promedio <- mean(cor_matrix[lower.tri(cor_matrix)])
cor_minima <- min(cor_matrix[lower.tri(cor_matrix)])
# Identificar variables en la combinación
variables_incluidas <- paste(combo, collapse = " + ")
variables_excluidas <- paste(setdiff(variables_disponibles, combo), collapse = ", ")
cat("COMBINACIÓN", i, ":\n")
cat("Variables:", variables_incluidas, "\n")
cat("Alpha:", round(alpha_val, 3), "\n")
cat("Correlación promedio:", round(cor_promedio, 3), "\n")
cat("Correlación mínima:", round(cor_minima, 3), "\n")
cat("---\n")
# Guardar resultados
resultados_completos <- rbind(resultados_completos, data.frame(
Combinacion = i,
Variables = variables_incluidas,
Variables_Excluidas = variables_excluidas,
Alpha = round(alpha_val, 3),
Correlacion_promedio = round(cor_promedio, 3),
Correlacion_minima = round(cor_minima, 3)
))
# ORDENAR POR ALPHA (MEJORES PRIMERO)
resultados_ordenados <- resultados_completos %>%
arrange(desc(Alpha))
cat("=== RANKING DE MEJORES COMBINACIONES ===\n")
print(resultados_ordenados)
# IDENTIFICAR LA MEJOR COMBINACIÓN
mejor_combinacion <- resultados_ordenados[1, ]
mejor_variables <- str_split(mejor_combinacion$Variables, " \\+ ")[[1]]
cat("\n=== MEJOR COMBINACIÓN ENCONTRADA ===\n")
cat("PUESTACIÓN: #1\n")
cat("VARIABLES:", mejor_combinacion$Variables, "\n")
cat("ALPHA:", mejor_combinacion$Alpha, "\n")
cat("CORRELACIÓN PROMEDIO:", mejor_combinacion$Correlacion_promedio, "\n")
cat("VARIABLES EXCLUIDAS:", mejor_combinacion$Variables_Excluidas, "\n")
# LISTA DE TODAS LAS VARIABLES DISPONIBLES
variables_disponibles <- c("R_satisfaccion_vida", "R_poco_interes_alegria",
"R_mala_opinion_propia", "R_decaimiento_des_pes",
"R_falta_energia")
# GENERAR TODAS LAS COMBINACIONES POSIBLES DE 3 VARIABLES que incluyan R_satisfaccion_vida
combinaciones_posibles <- combn(variables_disponibles, 3, simplify = FALSE) %>%
# Filtrar solo las que incluyan R_satisfaccion_vida
keep(~ "R_satisfaccion_vida" %in% .)
cat("=== ANÁLISIS EXHAUSTIVO DE COMBINACIONES ===\n")
cat("Total de combinaciones posibles con R_satisfaccion_vida:", length(combinaciones_posibles), "\n\n")
# ANALIZAR CADA COMBINACIÓN
resultados_completos <- data.frame()
for(i in 1:length(combinaciones_posibles)) {  # ¡FALTABA ESTE { !
combo <- combinaciones_posibles[[i]]
alpha_val <- psych::alpha(datos[combo])$total$raw_alpha
# Calcular estadísticas adicionales
cor_matrix <- cor(datos[combo], use = "complete.obs")
cor_promedio <- mean(cor_matrix[lower.tri(cor_matrix)])
cor_minima <- min(cor_matrix[lower.tri(cor_matrix)])
# Identificar variables en la combinación
variables_incluidas <- paste(combo, collapse = " + ")
variables_excluidas <- paste(setdiff(variables_disponibles, combo), collapse = ", ")
cat("COMBINACIÓN", i, ":\n")
cat("Variables:", variables_incluidas, "\n")
cat("Alpha:", round(alpha_val, 3), "\n")
cat("Correlación promedio:", round(cor_promedio, 3), "\n")
cat("Correlación mínima:", round(cor_minima, 3), "\n")
cat("---\n")
# Guardar resultados
resultados_completos <- rbind(resultados_completos, data.frame(
Combinacion = i,
Variables = variables_incluidas,
Variables_Excluidas = variables_excluidas,
Alpha = round(alpha_val, 3),
Correlacion_promedio = round(cor_promedio, 3),
Correlacion_minima = round(cor_minima, 3)
))
}  # ¡Y ESTE } !
# ORDENAR POR ALPHA (MEJORES PRIMERO)
resultados_ordenados <- resultados_completos %>%
arrange(desc(Alpha))
cat("=== RANKING DE MEJORES COMBINACIONES ===\n")
print(resultados_ordenados)
# IDENTIFICAR LA MEJOR COMBINACIÓN
mejor_combinacion <- resultados_ordenados[1, ]
mejor_variables <- str_split(mejor_combinacion$Variables, " \\+ ")[[1]]
cat("\n=== MEJOR COMBINACIÓN ENCONTRADA ===\n")
cat("PUESTACIÓN: #1\n")
cat("VARIABLES:", mejor_combinacion$Variables, "\n")
cat("ALPHA:", mejor_combinacion$Alpha, "\n")
cat("CORRELACIÓN PROMEDIO:", mejor_combinacion$Correlacion_promedio, "\n")
cat("VARIABLES EXCLUIDAS:", mejor_combinacion$Variables_Excluidas, "\n")
View(combinaciones_posibles)
# Seleccionar variables
datos2022 <- elsoc_long_2016_2023 %>%
filter(ola_w06 == 1) %>% # Seleccionamos solo casos de la ola 6, correspondiente a la de 2022
select(m0_sexo,  #sexo del entrevistado
m0_edad,  #edad del entrevistado
s01,      #satisfacción con la vida
s11_01,   #poco interés o alegría en realización actividades
s11_02,   #decaimiento, pesadez,desesperanza
s11_04,   #falta energía
s11_07    #mala opinión de sí mismo
)
#  Explorar Datos
View(datos2022) # Ver datos
names(datos2022) # Nombre de columnas
dim(datos2022) # Dimensiones
str(datos2022) # Estructura de los datos (las clases y categorías de respuesta)
# Renombrar variables
datos2022 <- datos2022 %>%
rename(sexo = m0_sexo,
edad = m0_edad,
satisfaccion_vida = s01,
poco_interes_alegria = s11_01,
decaimiento_pes_des = s11_02,
falta_energia = s11_04,
mala_opinión_propia = s11_07)
# Crear nueva bbdd "datos" con variables recodificadas
datos <- datos2022 %>%
mutate(across(c(sexo, edad, satisfaccion_vida, poco_interes_alegria, mala_opinion_propia, decaimiento_pes_des, falta_energia),
~ as.numeric(.))) %>%     # Eliminar atributos de etiquetas que causan problemas
mutate(
R_sexo = car::recode(sexo, recodes = c("'1' = '0';
'2' = '1'")),
# Edad en tramos
edad_tramo = cut(edad,
breaks = c(18, 29, 44, 59, 79, Inf),
labels = c("18-29", "30-44", "45-59", "60-79", "80+"),
right = TRUE,
include.lowest = TRUE),
edad_tramo_num = as.numeric(edad_tramo),  #convertir tramos a numérico (1 a 5)
# Invertir valores
R_satisfaccion_vida = car::recode(satisfaccion_vida,
recodes = c("1 = '5';
2 = '4';
3 = '3';
4 = '2';
5 = '1';
-888 = NA;
-999 = NA")),
# NA
R_poco_interes_alegria = car::recode(poco_interes_alegria,
recodes = c("-888 = NA;
-999 = NA")),
R_mala_opinion_propia = car::recode(mala_opinion_propia,
recodes = c("-888 = NA;
-999 = NA")),
R_decaimiento_des_pes = car::recode(decaimiento_pes_des,
recodes = c("-888 = NA;
-999 = NA")),
R_falta_energía = car::recode(falta_energia,
recodes = c("-888 = NA;
-999 = NA"))
) %>%
select (R_sexo, edad_tramo_num, R_satisfaccion_vida,  R_poco_interes_alegria, R_mala_opinion_propia, R_decaimiento_des_pes, R_falta_energia) #seleccionar  variables recodificadas para nueva bbdd
# Ver nueva base
glimpse(datos)
view(datos)
# Para identificar NA ocultos
table(datos$R_sexo, useNA = "always")
table(datos$edad_tramo_num, useNA = "always")
table(datos$R_satisfaccion_vida, useNA = "always")
table(datos$R_poco_interes_alegria, useNA = "always")
table(datos$R_mala_opinion_propia, useNA = "always")
table(datos$R_decaimiento_des_pes, useNA = "always")
table(datos$R_falta_energia, useNA = "always")
# Cargar librerías
if (!require("pacman")) install.packages("pacman") # instalar pacman
pacman::p_load(dplyr, # para sintaxis
Publish,# para IC)
gginference, # visualización
rempsyc, # reporte
kableExtra, # tablas
broom, # varios
flextable, # nice table
rempsyc,# tablas
tidyverse, # manipulación datos
car, # recodificar datos
sjPlot, # gráficos
rstatix, # test estadísticos
labelled,# para labels
sjmisc, # descriptivos
corrplot, # correlaciones
psych, # test estadísticos
sjstats, # tamaños de efecto
gginference,# visualización
gtools) #tablas
options(scipen = 999) # para desactivar notacion cientifica
rm(list = ls())       # para limpiar el entorno de trabajo
# 0.1 Cargar Base de Datos ELSOC
load(("C:/Users/josef/OneDrive - Universidad de Chile/Escritorio/Correlacional 2025/Reporte de análisis bivariado/input/data/ELSOC_Long_2016_2023.RData"))
# Seleccionar variables
datos2022 <- elsoc_long_2016_2023 %>%
filter(ola_w06 == 1) %>% # Seleccionamos solo casos de la ola 6, correspondiente a la de 2022
select(m0_sexo,  #sexo del entrevistado
m0_edad,  #edad del entrevistado
s01,      #satisfacción con la vida
s11_01,   #poco interés o alegría en realización actividades
s11_02,   #decaimiento, pesadez,desesperanza
s11_04,   #falta energía
s11_07    #mala opinión de sí mismo
)
#  Explorar Datos
View(datos2022) # Ver datos
names(datos2022) # Nombre de columnas
dim(datos2022) # Dimensiones
str(datos2022) # Estructura de los datos (las clases y categorías de respuesta)
# Renombrar variables
datos2022 <- datos2022 %>%
rename(sexo = m0_sexo,
edad = m0_edad,
satisfaccion_vida = s01,
poco_interes_alegria = s11_01,
decaimiento_pes_des = s11_02,
falta_energia = s11_04,
mala_opinión_propia = s11_07)
# Crear nueva bbdd "datos" con variables recodificadas
datos <- datos2022 %>%
mutate(across(c(sexo, edad, satisfaccion_vida, poco_interes_alegria, mala_opinion_propia, decaimiento_pes_des, falta_energia),
~ as.numeric(.))) %>%     # Eliminar atributos de etiquetas que causan problemas
mutate(
R_sexo = car::recode(sexo, recodes = c("'1' = '0';
'2' = '1'")),
# Edad en tramos
edad_tramo = cut(edad,
breaks = c(18, 29, 44, 59, 79, Inf),
labels = c("18-29", "30-44", "45-59", "60-79", "80+"),
right = TRUE,
include.lowest = TRUE),
edad_tramo_num = as.numeric(edad_tramo),  #convertir tramos a numérico (1 a 5)
# Invertir valores
R_satisfaccion_vida = car::recode(satisfaccion_vida,
recodes = c("1 = '5';
2 = '4';
3 = '3';
4 = '2';
5 = '1';
-888 = NA;
-999 = NA")),
# NA
R_poco_interes_alegria = car::recode(poco_interes_alegria,
recodes = c("-888 = NA;
-999 = NA")),
R_mala_opinion_propia = car::recode(mala_opinion_propia,
recodes = c("-888 = NA;
-999 = NA")),
R_decaimiento_des_pes = car::recode(decaimiento_pes_des,
recodes = c("-888 = NA;
-999 = NA")),
R_falta_energía = car::recode(falta_energia,
recodes = c("-888 = NA;
-999 = NA"))
) %>%
select (R_sexo, edad_tramo_num, R_satisfaccion_vida,  R_poco_interes_alegria, R_mala_opinion_propia, R_decaimiento_des_pes, R_falta_energia) #seleccionar  variables recodificadas para nueva bbdd
# Ver nueva base
glimpse(datos)
view(datos)
# Para identificar NA ocultos
table(datos$R_sexo, useNA = "always")
table(datos$edad_tramo_num, useNA = "always")
table(datos$R_satisfaccion_vida, useNA = "always")
table(datos$R_poco_interes_alegria, useNA = "always")
table(datos$R_mala_opinion_propia, useNA = "always")
table(datos$R_decaimiento_des_pes, useNA = "always")
table(datos$R_falta_energia, useNA = "always")
# Cargar librerías
if (!require("pacman")) install.packages("pacman") # instalar pacman
pacman::p_load(dplyr, # para sintaxis
Publish,# para IC)
gginference, # visualización
rempsyc, # reporte
kableExtra, # tablas
broom, # varios
flextable, # nice table
rempsyc,# tablas
tidyverse, # manipulación datos
car, # recodificar datos
sjPlot, # gráficos
rstatix, # test estadísticos
labelled,# para labels
sjmisc, # descriptivos
corrplot, # correlaciones
psych, # test estadísticos
sjstats, # tamaños de efecto
gginference,# visualización
gtools) #tablas
options(scipen = 999) # para desactivar notacion cientifica
rm(list = ls())       # para limpiar el entorno de trabajo
load(("C:/Users/josef/OneDrive - Universidad de Chile/Escritorio/Correlacional 2025/Reporte de análisis bivariado/input/data/ELSOC_Long_2016_2023.RData"))
# Cargar Librerías
if (!require("pacman")) install.packages("pacman") # instalar pacman
pacman::p_load(dplyr, # para sintaxis
Publish,# para IC)
gginference, # visualización
rempsyc, # reporte
kableExtra, # tablas
broom, # varios
flextable, # nice table
rempsyc,# tablas
tidyverse, # manipulación datos
car, # recodificar datos
sjPlot, # gráficos
rstatix, # test estadísticos
labelled,# para labels
sjmisc, # descriptivos
corrplot, # correlaciones
psych, # test estadísticos
sjstats, # tamaños de efecto
gginference,# visualización
gtools) #tablas
options(scipen = 999) # para desactivar notacion cientifica
rm(list = ls())       # para limpiar el entorno de trabajo
#| echo: false
#| warning: false
#| message: false
#| eval: true
# Cargar base de datos
load(("C:/Users/josef/OneDrive - Universidad de Chile/Escritorio/Correlacional 2025/Reporte de análisis bivariado/input/data/ELSOC_Long_2016_2023.RData"))
#| echo: false
#| warning: false
#| message: false
#| eval: true
# Seleccionar variables
datos2022 <- elsoc_long_2016_2023 %>%
filter(ola == 6) %>% # Seleccionamos solo casos de la ola 6, correspondiente a la de 2022
select(m0_sexo,  #sexo del entrevistado
m0_edad,  #edad del entrevistado
s01,      #satisfacción con la vida
s11_02,   #decaimiento, pesadez o desesperanza
s11_04    #cansancio o sensación de falta de energía
)
#| echo: false
#| warning: false
#| message: false
#| eval: true
# Renombrar variables
datos2022 <- datos2022 %>%
rename(sexo = m0_sexo,
edad = m0_edad,
satisfaccion_vida = s01,
decaimiento_pes_des = s11_02,
cansancio_falta_energia = s11_04)
#| echo: false
#| warning: false
#| message: false
#| eval: true
#| include: false
# Recodificar variables
## Crear nueva bbdd "datos" con variables recodificadas
datos <- datos2022 %>%
mutate(across(c(sexo, edad, satisfaccion_vida, decaimiento_pes_des, cansancio_falta_energia),
~ as.numeric(.))) %>%     # Eliminar atributos de etiquetas que causan problemas
mutate(
R_sexo = car::recode(sexo, recodes = c("'1' = '0';
'2' = '1'")),
# Edad en tramos
edad_tramo = cut(edad,
breaks = c(18, 29, 44, 59, 79, Inf),
labels = c("18-29", "30-44", "45-59", "60-79", "80+"),
right = TRUE,
include.lowest = TRUE),
edad_tramo_num = as.numeric(edad_tramo),  #convertir tramos a numérico (1 a 5)
# Invertir valores
R_satisfaccion_vida = car::recode(satisfaccion_vida,
recodes = c("1 = '5';
2 = '4';
3 = '3';
4 = '2';
5 = '1';
-888 = NA;
-999 = NA")),
# NA
R_decaimiento_pes_des = car::recode(decaimiento_pes_des,
recodes = c("-888 = NA;
-999 = NA")),
R_cansancio_falta_energia = car::recode(cansancio_falta_energia,
recodes = c("-888 = NA;
-999 = NA"))
) %>%
select (R_sexo, edad_tramo_num, R_satisfaccion_vida,  R_decaimiento_pes_des, R_cansancio_falta_energia) #seleccionar  variables recodificadas para nueva bbdd
# Ver nueva base
# Para identificar NA ocultos
table(datos$R_sexo, useNA = "always")
table(datos$edad_tramo_num, useNA = "always")
table(datos$R_satisfaccion_vida, useNA = "always")
table(datos$R_decaimiento_pes_des, useNA = "always")
table(datos$R_cansancio_falta_energia, useNA = "always")
