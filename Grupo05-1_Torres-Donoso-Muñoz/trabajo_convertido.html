<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>trabajo_convertido</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="trabajo_convertido_files/libs/clipboard/clipboard.min.js"></script>
<script src="trabajo_convertido_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="trabajo_convertido_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="trabajo_convertido_files/libs/quarto-html/popper.min.js"></script>
<script src="trabajo_convertido_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="trabajo_convertido_files/libs/quarto-html/anchor.min.js"></script>
<link href="trabajo_convertido_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="trabajo_convertido_files/libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="trabajo_convertido_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="trabajo_convertido_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="trabajo_convertido_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<p>Correlación entre nivel de pobreza y problemas de salud mental con perspectiva de género</p>
<p>Estadística Correlacional</p>
<p>Profesor: Juan Castillo V.</p>
<p>Profesor Colaborador:</p>
<p>Kevin Carrasco Quintanilla</p>
<p>Andreas Laffert T.</p>
<p>Ayudante:</p>
<p>Felipe Vega G.</p>
<p>Integrantes:</p>
<p>Ariel Alarcón T.</p>
<p>Francisco Muñoz M.</p>
<p>Trinidad Gaete D.</p>
<p>Fecha de entrega: 23/11/2025</p>
<ol type="1">
<li>Introducción (2 puntos, app. 500 palabras)</li>
</ol>
<p>Definición de la problemática a abordar, su relevancia y principales conceptos.</p>
<p>En este apartado es importante considerar:</p>
<p>La salud mental</p>
<p>Relevancia del tema de investigación.</p>
<p>Problematización: señalar problema de investigación y principales antecedentes</p>
<p>Precisar los conceptos centrales a investigar: Ejemplo “vamos a analizar la participación informal, entendiendo por ello la frecuencia de participación en actividades como marchas, boycotts y en redes sociales” [cita que apoye la definición].</p>
<p>Mencionar el principal objetivo del trabajo y las hipótesis de investigación en el párrafo final de esta sección (ej: se espera que el nivel educacional sea mayor en zonas urbanas en relación a zonas rurales). Mencionar al menos tres hipótesis (Hipótesis nula/ alternativa)</p>
<p>Esta sección debe estar respaldada por al menos 5 referencias bibliográficas.</p>
<p>Introducción</p>
<p>La salud mental, definida por la OMS como “un estado de completo bienestar físico, mental y social, y no solamente la ausencia de afecciones o enfermedades” es una de las grandes problemáticas del país, adquiriendo más notoriedad tras la pandemia en 2020, donde se pudo observar un deterioro de esta con las medidas de aislamiento para prevenir el covid. Tras el término de la pandemia estudios realizados por la UC y la ACHS indican que un 23,6% de los chilenos presenta sospechas o problemas de salud mental, y que el 45,9% evalúa que su estado de ánimo es peor o mucho peor que antes de la pandemia. Esto va acompañado con un gran déficit de financiamiento hacia la salud mental, ya que el presupuesto fiscal destinado a la salud mental apenas supera el 2% del total de presupuesto en salud, algo que se ve reflejado con el alcance de la atención de salud mental que en chile no supera el 20%, mientras que otros países la cobertura alcanza un 50% (Jiménez, J. P., Olhaberry, M., Altimir, C., Errázuriz, P., &amp; Dagnino, P. 2021)</p>
<p>Estos antecedentes van evidenciando la falta de ayuda estatal hacia los ciudadanos para combatir los crecientes problemas de salud mental, por lo que nuestro enfoque será el de analizar si existe una correlación con la pobreza en Chile, la cual según la últimos resultados de la encuesta CASEN 2022 la tasa de pobreza por ingresos fue del 6,5%, sin embargo, los cambios recomendados por la Mesa Técnica derivan en una nueva cifra de un 22,3%, por lo que la pobreza está mucho más presente en nuestro país de lo que se pensaba. También la precariedad laboral constituye una situación de riesgo para las personas, entendiéndolo como el espacio en que se relaciona el espacio de producción y el mercado laboral en los trabajadores, pudiendo así existir una crisis en este espacio ante situaciones de subordinación, ingresos, seguridad y formas contractuales (Blanco, O., &amp; Dasten, J. 2019)</p>
<p>Con estas problemáticas presentes el objetivo de nuestro trabajo será presentar un análisis sobre el dualismo entre la precariedad laboral y la pobreza como determinantes críticos de la salud mental en Chile, nuestras principales hipótesis son: Efecto directo acumulativo mayor</p>
<p>de la coexistencia de pobreza multidimensional y precariedad laboral sobre la salud mental, que la suma de sus efectos individuales. Con esta hipótesis buscamos demostrar que quienes experimentan ambas condiciones mostrarán prevalencias mayores de trastornos depresivos que aquellos con solo una de las condiciones.</p>
<p>La segunda Hipótesis será establecer la relación entre cómo la salud general puede predecir el bienestar subjetivo, esto ya que se puede evidenciar que “La salud se ve influenciada por las condiciones biopsicosociales en las que se desenvuelven las personas” (Jiménez, J. P., Olhaberry, M., Altimir, C., Errázuriz, P., &amp; Dagnino, P. 2021)</p>
<p>Finalmente, la tercera hipótesis sería observar cómo la precariedad laboral aumenta la soledad, perjudicando la salud mental, esto en el marco mencionado anteriormente de las relaciones de producción dentro del trabajo.</p>
<ol start="2" type="1">
<li>Metodología (2 puntos, app. 800 palabras)</li>
</ol>
<p>2.1 Definición de la base de datos</p>
<p>¿Qué fuente de información se utilizará?</p>
<p>¿Por qué organismo, empresa o institución está creada // diseñada y publicada?</p>
<p>Marco muestral</p>
<p>¿Qué tipo de representatividad tiene la base de datos // muestra?</p>
<p>¿Cuál es el tamaño de la muestra?</p>
<p>¿Cuál fue el tipo de muestreo utilizado?</p>
<p>¿Qué se utilizará para esta investigación? ¿Submuestra, tamaño muestral, qué filtros?</p>
<p>La presente investigación se sustenta metodológicamente en la Encuesta de Bienestar Social (EBS) del año 2023, instrumento diseñado por la Subsecretaría de Evaluación Social del Ministerio de Desarrollo Social y Familia de Chile. Su elección se debe a que posee técnicas sólidas que garantizan la representatividad estadística. El marco muestral original corresponde a personas de 18 años o más que conforman los hogares de viviendas particulares dentro del territorio nacional que habían participado previamente en la CASEN 2022. Este enfoque de panel permite realizar análisis longitudinales y aprovechar la información socioeconómica previamente recogida .La encuesta alcanza representatividad a nivel nacional, regional y por zona (urbana y rural), con la excepción de algunas comunas que el Instituto Nacional de Estadística (INE) cataloga como “especiales” debido a características particulares como alta densidad institucional, presencia de cuarteles militares, o zonas de difícil acceso que requieren procedimientos de muestreo específicos.</p>
<p>El tamaño muestral efectivo de la EBS 2023 alcanza las 11.234 personas tras aplicar los criterios de control de calidad y representatividad. Este tamaño muestral proporciona un error muestral máximo de ±0.93% para el nivel nacional con un nivel de confianza del 95%, permitiendo estimaciones precisas incluso para subgrupos poblacionales de tamaño moderado. El procedimiento de muestreo implementado fue de carácter probabilístico, bifásico y estratificado, compuesto por dos etapas claramente diferenciadas. La primera fase se basó en el marco muestral de viviendas logradas en CASEN 2022. La segunda fase seleccionó a personas de 18 años y más mediante un muestreo aleatorio estratificado por región, garantizando la proporcionalidad territorial en la representación.</p>
<p>Para evaluar las hipótesis se ha optado por trabajar con una submuestra específicamente definida. Esto debido a la necesidad de concentrar los datos estadísticos en los grupos de mayor interés analítico y de controlar la heterogeneidad no relevante para las hipótesis de investigación planteadas.</p>
<p>La submuestra seleccionada integra cuatro dimensiones centrales: nivel económico, situación laboral, salud y relaciones sociales. En el plano económico, se consideran los indicadores de pobreza multidimensional que combinan mediciones por ingresos con privaciones en dimensiones como educación, salud, trabajo y seguridad social, y vivienda. En la dimensión laboral, se incorporan variables relacionadas con la calidad del empleo, incluyendo formalidad, seguridad contractual, exposición a riesgos psicosociales y adecuación entre formación y ocupación. En el ámbito de la salud, se contemplan tanto indicadores auto reportados de salud física como mental. Finalmente, en la esfera de las relaciones sociales, se incluyen mediciones sobre composición y tamaño de red de apoyo, frecuencia de contacto social, participación comunitaria y percepción de apoyo social disponible.</p>
<p>Esta submuestra busca realizar análisis comparativos entre grupos de especial vulnerabilidad, como trabajadores informales con problemas de salud crónicos y redes sociales débiles, o adultos mayores en situación de pobreza multidimensional con limitaciones funcionales.</p>
<p>2.2 Definición de variables a utilizar:</p>
<p>Las variables a utilizar fueron 4 y son:</p>
<p>Para contrastar las hipótesis que planteamos utilizamos diferentes métodos estadísticos de acuerdo a los diferentes tipos de variables y objetivos analíticos. Todos los procedimientos se realizaron en R.</p>
<p>Lo primero que se realizó fueron las correlaciones de Pearson entre las distintas escalas construidas (económica, laboral, salud y relaciones sociales) y el índice general de bienestar. Este análisis preliminar permitió identificar relaciones lineales entre las dimensiones y justificar el uso de modelos de regresión en la siguiente etapa. Las correlaciones entregaron además un primer tamaño de efecto mediante el coeficiente r, interpretado bajo los criterios de Cohen para asociaciones pequeñas, medianas o grandes.</p>
<p>Luego se utilizaron modelos de regresión lineal, los cuales fueron los métodos centrales para el contraste de las hipótesis. Para la hipótesis número uno se utilizó un modelo de regresión lineal múltiple con interacción entre la escala económica y la escala laboral, permitiendo así evaluar si el efecto combinado de las dos variables es mayor que la suma de sus efectos individuales, indicando teóricamente un efecto sinérgico.</p>
<p>La segunda hipótesis se evaluó mediante un modelo de regresión lineal simple, utilizando la escala de salud como predictor único. Este procedimiento permite estimar la magnitud y dirección del efecto, así como determinar si dicho efecto es estadísticamente significativo. De manera similar, la tercera hipótesis —que establece que la precariedad laboral incrementa los niveles de soledad— se examinó mediante otro modelo de regresión lineal simple, considerando la escala laboral como variable independiente y la soledad invertida como variable dependiente.</p>
<p>Además de los contrastes de hipótesis, se efectuó una prueba de chi-cuadrado (χ²) para explorar la asociación entre el sexo y la presencia de deudas, con el objetivo de complementar los análisis descriptivos y contextualizar posibles desigualdades económicas entre subgrupos poblacionales. Aunque esta prueba no corresponde directamente a las hipótesis principales del estudio, contribuye a una comprensión más amplia del escenario socioeconómico de la muestra.</p>
<p>Respecto al cálculo de tamaños de efecto, se empleó el modelo de regresión, el coeficiente de determinación (R²) se utilizó para evaluar la proporción de varianza explicada por los predictores, constituyendo un indicador global del tamaño del efecto del modelo. Asimismo, se examinaron los coeficientes beta estandarizados (β), los cuales permiten comparar la magnitud relativa de los efectos entre variables en escalas distintas. En el caso de las correlaciones, el coeficiente r de Pearson se interpretó como medida de tamaño de efecto bivariado, siguiendo los criterios propuestos por Cohen (pequeño = 0.10, mediano = 0.30 y grande = 0.50). Finalmente, los intervalos de confianza del 95% acompañaron cada estimación como indicador de precisión.</p>
<p>Análisis de Resultados</p>
<p>Correlaciones (r), p-values e IC 95%</p>
<p>H1: Interacción pobreza × precariedad laboral sobre índice de bienestar</p>
<p>Observaciones: 6233</p>
<p>R² / R² ajustado: 0.669 / 0.669</p>
<p>H2: Efecto de salud sobre bienestar</p>
<p>Observaciones: 6233 R² / R² ajustado: 0.588 / 0.588</p>
<p>H3: Efecto de precariedad laboral sobre soledad</p>
<p>Observaciones: 6290 R² / R² ajustado: 0.002 / 0.001</p>
<p>Asociación entre sexo y deudas</p>
<p>Prueba χ² de independencia: χ² = 4.117, df = 1, φ = 0.019, p = 0.042</p>
<p>En primer lugar, se analizaron descriptivamente las escalas construidas. La escala económica, compuesta por la capacidad de llegar a fin de mes, presencia de deudas y percepción de protección financiera ante problemas de salud, presenta una distribución relativamente amplia y dispersa, lo que sugiere alta heterogeneidad en las percepciones económicas del país. Esto es consistente con los datos agregados de la EBS y la CASEN 2022, donde los niveles de vulnerabilidad económica no se concentran exclusivamente en los estratos bajos, sino que se extienden hacia sectores medios afectados por inseguridad financiera, endeudamiento y fluctuaciones en ingresos.</p>
<p>La escala laboral, que combina seguridad laboral invertida y apoyo entre compañeros/as de trabajo, muestra una distribución más concentrada, indicando variabilidad moderada. Esto es coherente con estudios previos que señalan que, si bien la precariedad laboral está presente en múltiples segmentos, la percepción de apoyo laboral tiende a ser más estable entre trabajadores formales. Además, la inseguridad laboral, incluso normalizada en escala 1–10, evidencia un peso significativo en la variación total del bienestar reportado.</p>
<p>Por su parte, la escala de salud, construida a partir de la salud autopercibida, la satisfacción con la vida y la protección financiera ante problemas de salud, es la que mostró mayor coherencia interna y una distribución menos simétrica. Esto sugiere que la salud en sentido amplio —no solo biomédica sino también emocional y subjetiva— es un eje dominante del bienestar personal. Los valores más altos se concentran en la satisfacción con la vida, mientras que la salud física presenta una mayor dispersión.</p>
<p>Finalmente, la escala social, que considera la frecuencia de soledad invertida y la existencia de redes que podrían prestar apoyo económico en casos de emergencia, presenta la distribución más marcada hacia valores intermedios. La soledad —incluso invertida para que un mayor valor signifique menor aislamiento— muestra un patrón que indica que buena parte de los encuestados experimenta niveles intermedios de desconexión social. La literatura internacional señala que la soledad es uno de los predictores más relevantes del malestar psicológico en contextos urbanos modernos, lo que se observa reflejado en los resultados preliminares.</p>
<p>Al examinar la matriz de correlaciones, se observó que todas las escalas se correlacionan positivamente con el índice general de bienestar. La correlación más alta se presenta entre la escala de salud y el índice de bienestar (r &gt; .60), lo que valida empíricamente la segunda hipótesis: “La salud predice significativamente el bienestar subjetivo”. El siguiente valor más elevado corresponde a la relación entre la escala económica y el bienestar general (r entre .40 y .50), lo cual es teóricamente consistente con modelos multidimensionales de bienestar que postulan que la seguridad financiera es uno de los factores estructurales que más influyen en la estabilidad emocional y psicológica de las personas.</p>
<p>Las correlaciones entre la escala laboral y la social con el bienestar general también fueron significativas, aunque de menor magnitud. Esto indica que la precariedad laboral y la calidad de las relaciones sociales influyen en el bienestar, pero su peso relativo es menor en comparación con la salud y la situación económica.</p>
<p>La correlación entre la escala económica y laboral es moderada, lo que respalda parcialmente la primera hipótesis: “La coexistencia de precariedad laboral y pobreza produce un efecto conjunto mayor que la suma de cada efecto individual sobre la salud mental”. Alcanzando una correlación del 95% de confianza, lo que, sí sugiere que ambas dimensiones están vinculadas, esto indica que las condiciones estructurales de inseguridad, inestabilidad laboral y endeudamiento se retroalimentan.Para corroborar la primera hipótesis se hizo uso de los modelos de regresión lineal, permitiendo profundizar en la evaluación de cada hipótesis.</p>
<p>En el modelo simple de bienestar predicho por la escala de salud, se observó un efecto estadísticamente significativo, robusto y con alto poder explicativo. Acto seguido, al modelar la interacción entre la escala económica y la laboral para evaluar la primera hipótesis, se observó que ambos predictores eran significativos por separado y que, además, la interacción también aportaba efectos al modelo. Este resultado indica que la combinación de vulnerabilidad económica y precariedad laboral no solo afecta de manera independiente al bienestar, sino que además amplifica sus efectos cuando se experimentan conjuntamente. Esto quiere decir que, las personas que enfrentan simultáneamente inseguridad laboral y dificultades económicas experimentan niveles de bienestar significativamente menores que aquellos que enfrentan solo una de estas condiciones.</p>
<p>Por otro lado, la tercera hipótesis, que proponía que la precariedad laboral incrementa la soledad, también fue contrastada mediante un modelo de regresión donde la variable dependiente fue el puntaje de soledad invertida. Los resultados muestran que la escala laboral predice significativamente la variación en la soledad, de modo que quienes reportan mayor inseguridad laboral y menores niveles de apoyo en el trabajo muestran mayor frecuencia de sentirse solos. Estos resultados complementan lo planteado en la referencia utilizada sobre vínculos entre precarización del trabajo y deterioro de redes afectivas producto de un mal ambiente laboral, dado que ambientes laborales inestables o hostiles pueden incrementar la distancia emocional entre los trabajadores y sus entornos sociales.</p>
<p>Adicionalmente, el análisis χ² entre sexo y presencia de deudas mostró diferencias moderadas, sin embargo este resultado no refuta la tercera hipótesis del estudio. La prueba χ² en este contexto no indicó el poder rechazar la H0.</p>
<p>En conjunto, los resultados del análisis terminan por demostrar que la salud mental puede estar condicionada por factores múltiples e interconectados, donde la salud física es el apartado más relevante, pero otras variables como la economía, el trabajo y las redes sociales también terminan por ejercer un efecto significativo. Este análisis da cuenta de interacciones reales entre precariedad económica y laboral, lo que refuerza el planteamiento inicial de que estas condiciones operan de manera acumulativa y no aislada. De esta forma aspectos como el endeudamiento, la inestabilidad laboral y ell malestar social si reflejan un deterioramiento de la salud mental en el país, en donde los resultados de la EBS del 2023 dan cuenta de que existe un aumento de esta crisis tras pasar los años de la pandemia.</p>
<p>Conclusión</p>
<p>El análisis realizado confirma que las hipótesis sobre la salud mental de las personas según su nivel de pobreza y la precariedad laboral está fuertemente determinada por los factores que influyen en estos, siendo los económicos, laborales, sociales y de salud, aspectos que interactúan entre sí en formas que amplifican su impacto sobre la calidad de vida. Los resultados permiten validar las tres hipótesis del estudio: primero, la coexistencia de precariedad laboral y vulnerabilidad económica produce un efecto conjunto y significativo sobre el bienestar, pudiendo establecer una relación entre la acumulación de desventajas estructurales con la intensificación del riesgo de malestar psicológico. Segundo, la salud —en su dimensión física, emocional y subjetiva— es el predictor más sólido del bienestar, coincidiendo con la noción general de que una buena salud física conlleva a una buena salud mental. Tercero, la precariedad laboral se asocia directamente con mayores niveles de soledad, mostrando que la inestabilidad en el empleo afecta no solo las condiciones materiales, sino también los vínculos sociales fundamentales, deteriorando la salud mental del individuo en el proceso.</p>
<p>En conclusión los resultados evidencian que la salud mental no puede ser comprendida de manera individual, sino como un fenómeno multidimensional que puede estar relacionado por las condiciones socioeconómicas y laborales del individuo. Estos hallazgos dan cuenta de la ausencia de políticas públicas orientadas a fortalecer y ayudar a la salud mental de las personas en Chile, produciendo una crisis que escala a niveles mas allá del interpersonal, por lo que el empezar por mejorar las condiciones laborales y económicas de las personas podría contribuir a la mejora de la salud mental de las personas.</p>
<p>Bibliografía:</p>
<p>Blanco, O., &amp; Dasten, J. (2019). Una tipología de precariedad laboral para Chile: la precariedad como fenómeno transclasista. Revista de la CEPAL.</p>
<p>Jiménez, J. P., Olhaberry, M., Altimir, C., Errázuriz, P., &amp; Dagnino, P. (2021). Salud mental en Chile: urgencias, desafíos y silencios.</p>
<p>Leiva-Peña, V., Rubí-González, P., &amp; Vicente-Parada, B. (2021). Determinantes sociales de la salud mental: políticas públicas desde el modelo biopsicosocial en países latinoamericanos. Revista panamericana de salud pública, 45, e158.</p>
<p>Ministerio de Desarrollo Social y Familia (2025) . Nota técnica: Resumen del Proceso de Revisión de las Propuestas para la Actualización de la Medición de la Pobreza en Chile.Bidat.gob.cl.</p>
<p>Ministerio de Desarrollo Social y Familia (2022). Encuesta de Caracterización Socioeconómica Nacional.</p>
<p>Etienne, C. F. (2018). Salud mental como componente de la salud universal. Revista Panamericana de Salud Pública, 42, e140.</p>
<p>Organización Panamericana de la Salud. Plan de acción sobre salud mental 2015-2020. 53 Consejo Directivo, 66 Sesión del Comité Regional de la OMS para las Américas. Washington, DC: OPS; 2014. Disponible en:</p>
<p>» https://www.paho.org/hq/dmdocuments/2015/plan-of-action-on-MH-2014.pdf</p>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>