---
title: "Metodología"
---

## Datos

El estudio a continuación se utiliza fuentes secundarias: dos bases de datos aplicados a nivel nacional por la Agencia de Calidad de la Educación: el SIMCE año 2024 (preliminar) de segundo medio y el Índice de Desarrollo Personal y Social del mismo año, los cuales ambos estaban dirigidos a establecimientos educacionales de Chile. El SIMCE es una evaluación estandarizada que mide aprendizajes tanto en lectura como en matemática, en tanto que el IPDS junta indicadores complementarios asociados a la convivencia escolar, clima, autoestima y otros aspectos ligados a lo no académico. Al final de este trabajo se ocuparon las variables necesarias, por lo que se elaboró un subset uniendo ambas bases por medio del identificador común del establecimiento (RBD). Iniciando desde esa unión se obtuvo archivo limpio para comenzar el análisis. 

Los 2978 establecimientos que conformaron la muestra final del estudio se repartieron en tres tipos: municipales/públicos (860), particulares subvencionados (1672) y particulares pagados (446). Demostrando que ambas bases provienen de un diseño muestral complejo, pero debido a que los objetivos de este trabajo son más bien descriptivos y exploratorios no fue de mayor esfuerzo. 


```{r carga base de datos}
# 1. Cargar librerías necesarias
library(tidyverse) # Para manipulación de datos y carga (readr, dplyr)

# 2. Cargar las bases de datos

# Base A: Resultados de Aprendizaje (SIMCE)
# Contiene: RBD, Dependencia, GSE, Promedios Mate/Lectura

datos_simce <- read_csv2("input/simce2m2024_rbd_preliminar.csv")

# Base B: Indicadores de Desarrollo Personal y Social (IDPS)
# Contiene: RBD, Indicadores de Clima (CC), Autoestima, etc.
datos_idps <- read_csv2("input/idps2M2024_rbd_preliminar.csv")

# 3. Procesamiento de la Base IDPS (Filtro para Hipótesis 3)
datos_clima <- datos_idps %>%
  filter(ind == "CC") %>%    # Filtramos solo el indicador 'Clima de Convivencia'
  select(rbd, prom) %>%      # Seleccionamos solo el ID del colegio y el puntaje
  rename(clima_convivencia = prom)    # Renombramos

# 4. Unión de Bases (Merge)
# Unimos la base SIMCE con la columna de Clima usando el RBD.
base_maestra <- datos_simce %>%
  left_join(datos_clima, by = "rbd")
```

## Variables

En el caso de la variables, las variables dependientes son el puntaje promedio SIMCE, que se compone de los resultados de lectura y matemática, ambas mediciones en escalas continuas de rendimiento. Esta variable se mantuvo en su formato original, ya que representa el desempeño académico promedio. Por otro lado, las variables independientes incluyen factores estructurales: 1) Dependencia administrativa: variable categórica recodificada en tres niveles jerárquicos según administración y recursos: (1) Municipal/Público, (2) Particular Subvencionado y (3) Particular Pagado. 2) Nivel socioeconómico del establecimiento: variable categórica ordinal que clasifica a los establecimientos en cinco tramos, desde "Bajo" hasta "Alto". Por último, 3) Clima de convivencia escolar del IPDS: variable cuantitativa continua proveniente del IDPS (indicador "CC"), que otorga un puntaje de 0 a 100 basado en la percepción de estudiantes sobre el ambiente de respeto, organización y seguridad.



```{r tabla-estadisticas-variables}
#| echo: false
#| warning: false
#| tbl-cap: "Estadísticas descriptivas por variable "
#| tbl-label: tbl-estadisticas-variables


base_proc <- base_maestra %>%
  #Seleccionamos las columnas originales y les damos nombres
  select(rbd,
         prom_mate = prom_mate2m_rbd,   # Nombre nuevo = Nombre original
         prom_lect = prom_lect2m_rbd,
         cod_depe2,
         cod_grupo,
         clima_convivencia
  ) %>%
  
  # 6. Corrección de sintaxis (FILTRAR)
  filter(!is.na(prom_mate) & !is.na(prom_lect)) %>%
  
  # 7. TRANSFORMACIÓN
  mutate(
    # Asegurar que sean numéricos
    prom_mate = as.numeric(prom_mate),
    
    # Recodificar Dependencia
    cod_depe2 = as.numeric(as.character(cod_depe2)),
    dependencia = case_when(
      cod_depe2 %in% c(1, 4) ~ "municipal/público",
      cod_depe2 == 2 ~ "part. subvencionado",
      cod_depe2 == 3 ~ "part. pagado",
      TRUE ~ NA_character_
    ),
    dependencia = factor(dependencia, levels = c("municipal/público", "part. subvencionado", "part. pagado")),
    
    # Recodificar GSE
    gse = factor(cod_grupo,
                 levels = c(1, 2, 3, 4, 5),
                 labels = c("bajo", "medio bajo", "medio", "medio alto", "alto"),
                 ordered = TRUE),
    
    # Asegurar que clima sea numérico
    clima_convivencia = as.numeric(clima_convivencia))

save(base_proc, file="input/base_proc.RData")
```

## Métodos
Previo al análisis, se revisó la consistencia de las bases, se identificaron valores perdidos, inconsistencias y confirmación de los rangos esperados de cada variable, realizando así una recodificaciones básicas, para que de esta manera asegurar que estuvieran listas para su uso. A partir de esto se pudo construir la base definitiva, sobre la cual se pudo desarrollar el proceso analítico, contemplando tres etapas. Primero, se aplicó un análisis descriptivo para caracterizar la muestra, utilizando: medidas de tendencia central (media) y dispersión (desviación estándar) en las continuas, y tablas de frecuencia relativa para las categóricas.  Luego, se aplicó un análisis bivariado según la medición; se compararon promedios SIMCE por dependencia administrativa con ANOVA (H1), y se midieron las asociaciones con el nivel socioeconómico y el clima de convivencia con coeficientes de correlación (Spearman para variables ordinales y Pearson para continuas) (H2 y H3). Finalmente se utilizó la significancia estadística (valor p) y la dirección de las asociaciones para determinar el grado de apoyo que tenían las hipótesis planteadas. En conjunto, se mantuvo un enfoque exploratorio, permitiendo observar como los factores estructurales y el clima escolar se relacionan inicialmente con el rendimiento académico de los estudiantes, sin avanzar hacia modelos explicativos más complejos.



