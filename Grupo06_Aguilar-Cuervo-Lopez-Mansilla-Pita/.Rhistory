#| warning: false
#| message: false
View(proc_enut)
kable(stats_itl, digits = 2)
stats_itl <- data.frame(
Estadístico = c("Media", "Mediana", "Desviación estándar", "Varianza",
"Mínimo", "Máximo", "Rango", "Coef. Variación", "N válidos"),
Valor = c(
mean(proc_enut$itl, na.rm = TRUE),
median(proc_enut$itl, na.rm = TRUE),
sd(proc_enut$itl, na.rm = TRUE),
var(proc_enut$itl, na.rm = TRUE),
min(proc_enut$itl, na.rm = TRUE),
max(proc_enut$itl, na.rm = TRUE),
diff(range(proc_enut$itl, na.rm = TRUE)),
sd(proc_enut$itl, na.rm = TRUE) / mean(proc_enut$itl, na.rm = TRUE),
sum(!is.na(proc_enut$itl))
)
)
kable(stats_itl, digits = 2)
sjmisc::frq(proc_enut$itl)
hist(proc_enut$itl,
main = "Distribución del Índice ITL",
xlab = "Valor del ITL",
ylab = "Frecuencia",
col = "skyblue4",
border = "white",
breaks = 20)
sjmisc::frq(proc_enut$sexo)
data.frame(
Estadístico = c("Media ITL", "Límite inferior IC 95%", "Límite superior IC 95%"),
Valor = c(media_itl, ic_itl[1], ic_itl[2])
) %>%
kable() %>%
kable_styling(full_width = FALSE)
View(stats_itl)
data.frame(
Estadístico = c("Media ITL", "Límite inferior IC 95%", "Límite superior IC 95%"),
Valor = c(stats_itl, ic_itl[1], ic_itl[2])
) %>%
kable() %>%
kable_styling(full_width = FALSE)
alpha_itl <- psych::alpha(M_itl)
alpha_itl$total$raw_alpha
# Cargar librerías necesarias
library(dplyr)
library(sjPlot)
# Selección de variables del índice ITL
M_itl <- proc_enut %>%
dplyr::select(trabajo, estudio, resp_personal, ocio)
# Matriz de correlaciones
sjPlot::tab_corr(
M_itl,
na.deletion = "pairwise",
triangle = "lower"
)
# Matriz de correlaciones
sjPlot::tab_corr(
M_itl,
na.deletion = "listwise",
triangle = "lower"
)
# Convertir resultado en tabla
stats.table <- tidy(cor_results)
# Matriz de correlaciones
sjPlot::tab_corr(
M_itl,
na.deletion = "listwise",
triangle = "lower"
)
#curva normal y puntaje Z
media_itl <- mean(proc_enut$itl)
desv_estandar_itl <- sd(proc_enut$itl)
cat("Desviación Estándar:", desv_estandar_itl, "\n")
z_scores_itl <- scale(proc_enut$itl)
head(data.frame(
Valor_ITL = proc_enut$itl,
Z_ITL = z_scores_itl
), 10)
data.frame(
Estadístico = c("Media ITL", "Límite inferior IC 95%", "Límite superior IC 95%"),
Valor = c(media_itl, ic_itl[1], ic_itl[2])
) %>%
kable() %>%
kable_styling(full_width = FALSE)
#curva normal y puntaje Z
media_itl <- mean(proc_enut$itl)
desv_estandar_itl <- sd(proc_enut$itl)
cat("Desviación Estándar:", desv_estandar_itl, "\n")
z_scores_itl <- scale(proc_enut$itl)
data.frame(
Estadístico = c("Media ITL", "Límite inferior IC 95%", "Límite superior IC 95%"),
Valor = c(media_itl, ic_itl[1], ic_itl[2])
) %>%
kable() %>%
kable_styling(full_width = FALSE)
head(data.frame(
Valor_ITL = proc_enut$itl,
Z_ITL = z_scores_itl
), 10)
data.frame(
Estadístico = c("Media ITL", "Límite inferior IC 95%", "Límite superior IC 95%"),
Valor = c(media_itl, ic_itl[1], ic_itl[2])
) %>%
kable() %>%
kable_styling(full_width = FALSE)
#curva normal y puntaje Z
media_itl <- mean(proc_enut$itl)
desv_estandar_itl <- sd(proc_enut$itl)
cat("Desviación Estándar:", desv_estandar_itl, "\n")
z_scores_itl <- scale(proc_enut$itl)
head(data.frame(
Valor_ITL = proc_enut$itl,
Z_ITL = z_scores_itl
), 10)
x_values <- seq(min(proc_enut$itl, na.rm = TRUE),
max(proc_enut$itl, na.rm = TRUE),
length = 1000)
y_values <- dnorm(x_values, mean = media_itl, sd = desv_estandar_itl)
plot(x_values, y_values,
type = "l",
xlab = "ITL",
ylab = "Densidad",
main = "Distribución Normal del Índice de Tiempo Libre (ITL)")
pnorm(1.96)    # P(Z <= 1.96)
pnorm(-1.96)   # P(Z <= -1.96)
t_test_itl <- t.test(proc_enut$itl)
media_itl <- t_test_itl$estimate
ic_itl <- t_test_itl$conf.int
cat("Media del ITL:", round(media_itl, 3), "\n")
cat("IC 95%:", round(ic_itl[1], 3), " - ", round(ic_itl[2], 3), "\n")
data.frame(
Estadístico = c("Media ITL", "Límite inferior IC 95%", "Límite superior IC 95%"),
Valor = c(media_itl, ic_itl[1], ic_itl[2])
) %>%
kable() %>%
kable_styling(full_width = FALSE)
# Cargar librerías necesarias
library(dplyr)
library(sjPlot)
# Selección de variables del índice ITL
M_itl <- proc_enut %>%
dplyr::select(trabajo, estudio, resp_personal, ocio)
# Matriz de correlaciones
sjPlot::tab_corr(
M_itl,
na.deletion = "listwise",
triangle = "lower"
)
# Convertir resultado en tabla
stats.table <- tidy(cor_results)
cor_results <- cor.test(x = proc_enut$sexo,
y = proc_enut$itl,
method = "pearson",
use = "complete.obs") # Considerar solo datos completos (listwise)
stats.table <- tidy(cor_results)
stats.table %>%
dplyr::mutate(
estimate = round(estimate, 2),
statistic = round(statistic, 2),
ic_95 = paste0("[", round(conf.low, 2), ", ", round(conf.high, 2), "]"),
stars = gtools::stars.pval(p.value),
p_value = dplyr::case_when(
p.value < 0.05 & p.value > 0.01 ~ "< 0.05",
p.value < 0.01 & p.value > 0.001 ~ "< 0.01",
p.value < 0.001 ~ "< 0.001",
TRUE ~ ""
),
p_value = paste0(p_value, stars)
) %>%
dplyr::select(
estimate, statistic, p_value, parameter,
method, alternative, ic_95
) %>%
kableExtra::kable(
col.names = c("Estimación", "t", "p-value", "df", "Método", "Alternativa", "95% IC"),
booktabs = TRUE
) %>%
kableExtra::kable_styling(
bootstrap_options = c("striped", "hover", "condensed", "responsive"),
full_width = TRUE,
latex_options = "hold_position",
position = "center"
)
# correlación Pearson entre ITL y edad
cor_results2 <- cor.test(
x = proc_enut$edad,
y = proc_enut$itl,
method = "pearson",
use = "complete.obs"
)
cor_results2  # mostrar resultado del test
# tabla amigable
stats.table2 <- tidy(cor_results2)
stats.table %>%
dplyr::mutate(
estimate = round(estimate, 2),
statistic = round(statistic, 2),
ic_95 = paste0("[", round(conf.low, 2), ", ", round(conf.high, 2), "]"),
stars = gtools::stars.pval(p.value),
p_value = case_when(
p.value < 0.05 & p.value > 0.01 ~ "< 0.05",
p.value < 0.01 & p.value > 0.001 ~ "< 0.01",
p.value < 0.001 ~ "< 0.001",
TRUE ~ ""
),
p_value = paste0(p_value, stars)
) %>%
dplyr::select(estimate, statistic, p_value, parameter, method, alternative, ic_95) %>%
kableExtra::kable(
col.names = c("Estimación", "t", "p-value", "df", "Método", "Alternativa", "95% IC"),
booktabs = TRUE
) %>%
kableExtra::kable_styling(
bootstrap_options = c("striped", "hover", "condensed", "responsive"),
full_width = TRUE,
position = "center"
)
cor_results <- cor.test(x = proc_enut$sexo,
y = proc_enut$itl,
method = "pearson",
use = "complete.obs") # Considerar solo datos completos (listwise)
stats.table <- tidy(cor_results)
stats.table %>%
dplyr::mutate(
estimate = round(estimate, 2),
statistic = round(statistic, 2),
ic_95 = paste0("[", round(conf.low, 2), ", ", round(conf.high, 2), "]"),
stars = gtools::stars.pval(p.value),
p_value = dplyr::case_when(
p.value < 0.05 & p.value > 0.01 ~ "< 0.05",
p.value < 0.01 & p.value > 0.001 ~ "< 0.01",
p.value < 0.001 ~ "< 0.001",
TRUE ~ ""
),
p_value = paste0(p_value, stars)
) %>%
dplyr::select(
estimate, statistic, p_value, parameter,
method, alternative, ic_95
) %>%
kableExtra::kable(
col.names = c("Estimación", "t", "p-value", "df", "Método", "Alternativa", "95% IC"),
booktabs = TRUE
) %>%
kableExtra::kable_styling(
bootstrap_options = c("striped", "hover", "condensed", "responsive"),
full_width = TRUE,
latex_options = "hold_position",
position = "center"
)
# correlación Pearson entre ITL y edad
cor_results2 <- cor.test(
x = proc_enut$edad,
y = proc_enut$itl,
method = "pearson",
use = "complete.obs"
)
cor_results2  # mostrar resultado del test
# tabla amigable
stats.table2 <- tidy(cor_results2)
# tabla amigable
stats.table2 <- tidy(cor_results2)
stats.table2 %>%
dplyr::mutate(
estimate = round(estimate, 2),
statistic = round(statistic, 2),
ic_95 = paste0("[", round(conf.low, 2), ", ", round(conf.high, 2), "]"),
stars = gtools::stars.pval(p.value),
p_value = case_when(
p.value < 0.05 & p.value > 0.01 ~ "< 0.05",
p.value < 0.01 & p.value > 0.001 ~ "< 0.01",
p.value < 0.001 ~ "< 0.001",
TRUE ~ ""
),
p_value = paste0(p_value, stars)
) %>%
dplyr::select(estimate, statistic, p_value, parameter, method, alternative, ic_95) %>%
kableExtra::kable(
col.names = c("Estimación", "t", "p-value", "df", "Método", "Alternativa", "95% IC"),
booktabs = TRUE
) %>%
kableExtra::kable_styling(
bootstrap_options = c("striped", "hover", "condensed", "responsive"),
full_width = TRUE,
position = "center"
)
# Correlación entre ITL y discapacidad (pesd)
cor_results3 <- cor.test(
x = proc_enut$pesd,
y = proc_enut$itl,
method = "pearson",
use = "complete.obs"
)
cor_results3   # mostrar resultado del test
# Tabla amigable con kableExtra
stats.table3 <- tidy(cor_results3)
stats.table3 %>%
dplyr::mutate(
estimate = round(estimate, 2),
statistic = round(statistic, 2),
ic_95 = paste0("[", round(conf.low, 2), ", ", round(conf.high, 2), "]"),
stars = gtools::stars.pval(p.value),
p_value = dplyr::case_when(
p.value < 0.05 & p.value > 0.01 ~ "< 0.05",
p.value < 0.01 & p.value > 0.001 ~ "< 0.01",
p.value < 0.001 ~ "< 0.001",
TRUE ~ ""
),
p_value = paste0(p_value, stars)
) %>%
dplyr::select(estimate, statistic, p_value, parameter, method, alternative, ic_95) %>%
kableExtra::kable(
col.names = c("Estimación", "t", "p-value", "df", "Método", "Alternativa", "95% IC"),
booktabs = TRUE
) %>%
kableExtra::kable_styling(
bootstrap_options = c("striped", "hover", "condensed", "responsive"),
full_width = TRUE,
position = "center"
)
# Tablas de contingencia con sjPlot
sjPlot::sjt.xtab(
var.row = proc_enut$sexo,
var.col = proc_enut$itl_recod,
show.summary = FALSE,
emph.total = TRUE
)
stats.table3 %>%
dplyr::mutate(
estimate = round(estimate, 2),
statistic = round(statistic, 2),
ic_95 = paste0("[", round(conf.low, 2), ", ", round(conf.high, 2), "]"),
stars = gtools::stars.pval(p.value),
p_value = dplyr::case_when(
p.value < 0.05 & p.value > 0.01 ~ "< 0.05",
p.value < 0.01 & p.value > 0.001 ~ "< 0.01",
p.value < 0.001 ~ "< 0.001",
TRUE ~ ""
),
p_value = paste0(p_value, stars)
) %>%
dplyr::select(estimate, statistic, p_value, parameter, method, alternative, ic_95) %>%
kableExtra::kable(
col.names = c("Estimación", "t", "p-value", "df", "Método", "Alternativa", "95% IC"),
booktabs = TRUE
) %>%
kableExtra::kable_styling(
bootstrap_options = c("striped", "hover", "condensed", "responsive"),
full_width = TRUE,
position = "center"
)
# Correlación entre ITL y discapacidad (pesd)
cor_results3 <- cor.test(
x = proc_enut$pesd,
y = proc_enut$itl,
method = "pearson",
use = "complete.obs"
)
cor_results3   # mostrar resultado del test
# Tabla amigable con kableExtra
stats.table3 <- tidy(cor_results3)
stats.table3 %>%
dplyr::mutate(
estimate = round(estimate, 2),
statistic = round(statistic, 2),
ic_95 = paste0("[", round(conf.low, 2), ", ", round(conf.high, 2), "]"),
stars = gtools::stars.pval(p.value),
p_value = dplyr::case_when(
p.value < 0.05 & p.value > 0.01 ~ "< 0.05",
p.value < 0.01 & p.value > 0.001 ~ "< 0.01",
p.value < 0.001 ~ "< 0.001",
TRUE ~ ""
),
p_value = paste0(p_value, stars)
) %>%
dplyr::select(estimate, statistic, p_value, parameter, method, alternative, ic_95) %>%
kableExtra::kable(
col.names = c("Estimación", "t", "p-value", "df", "Método", "Alternativa", "95% IC"),
booktabs = TRUE
) %>%
kableExtra::kable_styling(
bootstrap_options = c("striped", "hover", "condensed", "responsive"),
full_width = TRUE,
position = "center"
)
# Tablas de contingencia con sjPlot
sjPlot::sjt.xtab(
var.row = proc_enut$sexo,
var.col = proc_enut$itl_recod,
show.summary = FALSE,
emph.total = TRUE
)
sjPlot::sjt.xtab(
var.row = proc_enut$sexo,
var.col = proc_enut$itl_recod,
show.summary = FALSE,
emph.total = TRUE,
show.row.prc = TRUE,
show.col.prc = TRUE
)
stats.table3 %>%
dplyr::mutate(
estimate = round(estimate, 2),
statistic = round(statistic, 2),
ic_95 = paste0("[", round(conf.low, 2), ", ", round(conf.high, 2), "]"),
stars = gtools::stars.pval(p.value),
p_value = dplyr::case_when(
p.value < 0.05 & p.value > 0.01 ~ "< 0.05",
p.value < 0.01 & p.value > 0.001 ~ "< 0.01",
p.value < 0.001 ~ "< 0.001",
TRUE ~ ""
),
p_value = paste0(p_value, stars)
) %>%
dplyr::select(estimate, statistic, p_value, parameter, method, alternative, ic_95) %>%
kableExtra::kable(
col.names = c("Estimación", "t", "p-value", "df", "Método", "Alternativa", "95% IC"),
booktabs = TRUE
) %>%
kableExtra::kable_styling(
bootstrap_options = c("striped", "hover", "condensed", "responsive"),
full_width = TRUE,
position = "center"
)
sjPlot::sjt.xtab(
var.row = proc_enut$sexo,
var.col = proc_enut$itl_recod,
show.summary = FALSE,
emph.total = TRUE
)
sjPlot::sjt.xtab(var.row = proc_enut$sexo,
var.col = proc_enut$itl_recod,
show.summary = F,
emph.total = T,
show.row.prc = T, # porcentaje fila
show.col.prc = T # porcentaje columna
)
chi_results <- chisq.test(table(proc_enut$sexo, proc_enut$itl_recod))
chi_results
stats.table4 <- tidy(chi_results, conf.int = TRUE)
nice_table(stats.table4)
ggchisqtest(chi_results)
sjstats::phi(table(proc_enut$sexo, proc_enut$itl_recod))
# creamos un nuevo objeto "graf" para transformar la clase de las variables a factor
graf <- proc_enut %>%
mutate(
itl_recod = factor(itl_recod, labels = c("No tiene tiempo libre", "Tiene tiempo libre")),
sexo = factor(sexo, labels = c("Hombre", "Mujer"))
)
ggplot(
data = graf,
mapping = aes(x = itl_recod, fill = sexo)
) +
geom_bar(position = "dodge2") +
labs(
title ="ITL, según sexo ENUT 2023",
x = "ITL",
y = "Frecuencia",
caption = "Fuente: Elaboración propia en base a ENUT 2023."
) +
geom_text(
aes(label = ..count..),
stat = "count",
colour = "black",
vjust = 1.5,
position = position_dodge(.9),
size = 3
)
sjPlot::sjt.xtab(
var.row = proc_enut$edad_recod,
var.col = proc_enut$itl_recod,
show.summary = FALSE,
emph.total = TRUE
)
sjPlot::sjt.xtab(
var.row = proc_enut$edad_recod,
var.col = proc_enut$itl_recod,
show.summary = FALSE,
emph.total = TRUE,
show.row.prc = TRUE,   # porcentaje por fila
show.col.prc = TRUE    # porcentaje por columna
)
chi_results2 <- chisq.test(table(proc_enut$edad_recod, proc_enut$itl_recod))
chi_results2
stats.table5 <- tidy(chi_results2, conf.int = TRUE)
nice_table(stats.table5)
ggchisqtest(chi_results2)
graf2 <- proc_enut %>%
mutate(
itl_recod = factor(itl_recod, labels = c("No tiene tiempo libre", "Tiene tiempo libre")),
edad_recod = factor(edad_recod, labels = c("0-18 años", "19-29 años", "30-49 años", "50-64 años", "65+ años"))
)
ggplot(
data = graf2,
mapping = aes(x = itl_recod, fill = edad_recod)) +
geom_bar(position = "dodge2") +
labs(title ="ITL, según tramos etarios ENUT 2023",
x = "ITL",
y = "Frecuencia",
caption = "Fuente: Elaboración propia en base a ENUT 2023.") +
geom_text(aes(label = ..count..), stat = "count", colour = "black",
vjust = 1.5, position = position_dodge(.9), size = 3)
t_test_itl <- t.test(proc_enut$itl)
media_itl <- t_test_itl$estimate
ic_itl <- t_test_itl$conf.int
data.frame(
Estadístico = c("Media ITL", "Límite inferior IC 95%", "Límite superior IC 95%"),
Valor = c(media_itl, ic_itl[1], ic_itl[2])
) %>%
kable() %>%
kable_styling(full_width = FALSE)
